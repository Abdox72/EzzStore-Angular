<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h1>
    <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ù…ØªØ¬Ø± EzzStore</p>
  </div>

  <!-- Date Range Filter -->
  <div class="date-filter-section">
    <form [formGroup]="dateRangeForm" (ngSubmit)="onDateRangeSubmit()" class="date-filter-form">
      <div class="form-group">
        <label for="startDate">Ù…Ù† ØªØ§Ø±ÙŠØ®:</label>
        <input type="date" id="startDate" formControlName="startDate" class="form-control">
      </div>
      <div class="form-group">
        <label for="endDate">Ø¥Ù„Ù‰ ØªØ§Ø±ÙŠØ®:</label>
        <input type="date" id="endDate" formControlName="endDate" class="form-control">
      </div>
      <button type="submit" class="btn btn-primary" [disabled]="!dateRangeForm.valid || loading">
        {{ loading ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...' : 'ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„ØªØ±' }}
      </button>
      <button type="button" class="btn btn-secondary" (click)="resetDateRange()">
        Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
      </button>
    </form>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-spinner">
    <div class="spinner"></div>
    <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="dashboardData && !loading" class="dashboard-content">
    <!-- Statistics Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon products-icon">ğŸ“¦</div>
        <div class="stat-content">
          <h3>{{ dashboardData.totalProducts }}</h3>
          <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon categories-icon">ğŸ·ï¸</div>
        <div class="stat-content">
          <h3>{{ dashboardData.totalCategories }}</h3>
          <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ¦Ø§Øª</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon users-icon">ğŸ‘¥</div>
        <div class="stat-content">
          <h3>{{ dashboardData.totalUsers }}</h3>
          <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon orders-icon">ğŸ“‹</div>
        <div class="stat-content">
          <h3>{{ dashboardData.totalOrders }}</h3>
          <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</p>
        </div>
      </div>

      <div class="stat-card revenue-card">
        <div class="stat-icon revenue-icon">ğŸ’°</div>
        <div class="stat-content">
          <h3>{{ formatCurrency(dashboardData.totalRevenue) }}</h3>
          <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª</p>
        </div>
      </div>

      <div class="stat-card monthly-revenue-card">
        <div class="stat-icon monthly-icon">ğŸ“…</div>
        <div class="stat-content">
          <h3>{{ formatCurrency(dashboardData.monthlyRevenue) }}</h3>
          <p>Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„Ø´Ù‡Ø±</p>
        </div>
      </div>
    </div>

    <!-- Order Status Overview -->
    <div class="order-status-section">
      <h2>Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
      <div class="order-status-grid">
        <div class="status-card pending">
          <h4>{{ dashboardData.pendingOrders }}</h4>
          <p>Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>
        </div>
        <div class="status-card confirmed">
          <h4>{{ dashboardData.shippedOrders }}</h4>
          <p>ØªÙ… Ø§Ù„Ø´Ø­Ù†</p>
        </div>
        <div class="status-card shipped">
          <h4>{{ dashboardData.deliveredOrders }}</h4>
          <p>ØªÙ… Ø§Ù„ØªÙˆØµÙŠÙ„</p>
        </div>
        <div class="status-card delivered">
          <h4>{{ dashboardData.cancelledOrders }}</h4>
          <p>Ù…Ù„ØºÙŠ</p>
        </div>
      </div>
    </div>

    <!-- Charts Section -->
    <div class="charts-section">
      <div class="chart-container">
        <h3>Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h3>
        <div class="revenue-chart">
          <div *ngFor="let item of getRevenueChartData()" class="chart-bar">
            <div class="bar" [style.height.px]="getBarHeight(item.revenue)"></div>
            <span class="bar-label">{{ item.period }}</span>
            <span class="bar-value">{{ formatCurrency(item.revenue) }}</span>
          </div>
        </div>
      </div>

      <div class="chart-container">
        <h3>ØªÙˆØ²ÙŠØ¹ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
        <div class="order-status-chart">
          <div *ngFor="let item of getOrderStatusChartData()" class="chart-item">
            <div class="chart-color" [style.background-color]="item.color"></div>
            <span class="chart-label">{{ getStatusText(item.status) }}</span>
            <span class="chart-value">{{ item.count }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Top Products -->
    <div class="top-products-section">
      <h2>Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù…Ø¨ÙŠØ¹Ø§Ù‹</h2>
      <div class="top-products-grid">
        <div *ngFor="let product of getTopProductsData()" class="product-card">
          <div class="product-image">
            <img [src]="staticFiles+product.imageUrl || 'assets/images/placeholder.jpg'" [alt]="product.productName">
          </div>
          <div class="product-info">
            <h4>{{ product.productName }}</h4>
            <p>Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø¨Ø§Ø¹Ø©: {{ product.totalSold }}</p>
            <p>Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª: {{ formatCurrency(product.totalRevenue) }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Recent Orders -->
    <div class="recent-orders-section">
      <h2>Ø£Ø­Ø¯Ø« Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
      <div class="orders-table">
        <div class="table-header">
          <span>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</span>
          <span>Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„</span>
          <span>Ø§Ù„Ù…Ø¨Ù„Øº</span>
          <span>Ø§Ù„Ø­Ø§Ù„Ø©</span>
          <span>Ø§Ù„ØªØ§Ø±ÙŠØ®</span>
        </div>
        <div *ngFor="let order of dashboardData.recentOrders" class="table-row">
          <span>#{{ order.id }}</span>
          <span>{{ order.customerName }}</span>
          <span>{{ formatCurrency(order.totalAmount) }}</span>
          <span class="status-badge mx-3" [ngClass]="getStatusClass(order.orderStatus)">
            {{ getStatusText(order.orderStatus) }}
          </span>
          <span class="ms-3" style="margin: 0 10px;">{{ order.createdAt | date:'short' }}</span>
        </div>
      </div>
    </div>
  </div>
</div>