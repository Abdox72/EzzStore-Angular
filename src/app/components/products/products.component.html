<div class="products-container">
  <div class="products-layout">
    <!-- Side Filters -->
    <div class="side-filters">
      <div class="filter-section">
        <h3>ุงูุชุตูููุงุช</h3>
        <div class="category-filters">
          <label *ngFor="let cat of categories" class="category-option">
            <input type="checkbox" 
                    [checked]="selectedCategories.includes(cat.id)"
                    (change)="toggleCategory(cat.id)">
            {{ cat.name }}
          </label>
        </div>
      </div>

      <div class="filter-section">
        <h3>ูุทุงู ุงูุณุนุฑ</h3>
        <div class="price-range">
          <input type="range" 
                  [min]="minPrice" 
                  [max]="maxPrice" 
                  [(ngModel)]="priceRange" 
                  (input)="filterProducts()">
          <div class="price-inputs">
            <input type="number" 
                    [(ngModel)]="priceRange" 
                    (input)="filterProducts()" 
                    [min]="minPrice" 
                    [max]="maxPrice">
            <span>ุฏููุงุฑ</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="search-bar">
        <input type="text" 
                [(ngModel)]="searchTerm" 
                placeholder="ุงูุจุญุซ ุนู ููุชุฌ..." 
                (input)="filterProducts()">
        <span class="search-icon">๐</span>
      </div>

      <div class="page-size-controls" *ngIf="totalPages > 1">
        <div class="page-size-selector">
          <label for="page-size">ุนุฏุฏ ุงูุนูุงุตุฑ ูู ุงูุตูุญุฉ:</label>
          <select id="page-size" (change)="onPageSizeChange($event)">
            <option value="12">12</option>
            <option value="24">24</option>
            <option value="48">48</option>
          </select>
        </div>
      </div>

      <div class="products-grid">
        <div class="product-card" *ngFor="let product of paginatedProducts">
          <div class="product-image">
            <img [src]="staticFiles+product.images?.[0]?.imageUrl || '/assets/images/placeholder.jpg'" [alt]="product.title">
          </div>
          <div class="product-info">
            <h3>{{ product.title }}</h3>
            <p class="description">{{ product.description }}</p>
            <div class="product-meta price-container">
              <!-- <span class="price">{{ product.price | currency:'EGP' }}</span> -->
              <span class="price">{{ product.price }}</span>
              <span class="currency">ุฏููุงุฑ</span>
            </div>
            <div class="product-meta">
              <span class="stock">ุงููุฎุฒูู: {{ product.stock }}</span>
            </div>
            <div class="category">
              <span class="category-badge">{{ product.category?.name || 'ุจุฏูู ุชุตููู' }}</span>
            </div>
          </div>
          <div class="product-actions">
            <button class="add-to-cart" (click)="addToCart(product)">ุฅุถุงูุฉ ุฅูู ุงูุณูุฉ</button>
            <a [routerLink]="['/products', product.id]" class="view-details">ุนุฑุถ ุงูุชูุงุตูู</a>
          </div>
        </div>
      </div>

      <!-- Pagination Controls -->
      <div class="pagination-section" *ngIf="totalPages > 1">
        <div class="pagination-info">
          ุนุฑุถ {{ (currentPage - 1) * pageSize + 1 }} ุฅูู {{ Math.min(currentPage * pageSize, totalItems) }} 
          ูู ุฃุตู {{ totalItems }} ููุชุฌ
        </div>
        
        <div class="pagination-controls">
          <button class="btn btn-sm" [disabled]="!hasPreviousPage" (click)="onPageChange(currentPage - 1)">
            ุงูุณุงุจู
          </button>
          
          <div class="page-numbers">
            <button *ngFor="let page of getPageNumbers()" 
                    class="btn btn-sm" 
                    [class.active]="page === currentPage"
                    (click)="onPageChange(page)">
              {{ page }}
            </button>
          </div>
          
          <button class="btn btn-sm" [disabled]="!hasNextPage" (click)="onPageChange(currentPage + 1)">
            ุงูุชุงูู
          </button>
        </div>
      </div>

      <div class="no-products" *ngIf="filteredProducts.length === 0">
        <p>ูู ูุชู ุงูุนุซูุฑ ุนูู ููุชุฌุงุช ุชุทุงุจู ูุนุงููุฑ ุงูุจุญุซ</p>
      </div>
    </div>
  </div>
</div>

